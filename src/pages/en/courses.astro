---
import Layout from '@/layouts/Layout.astro';
import CourseTabs from '@/components/CourseTabs';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// 课程分类标签
const categories = [
  t('courses.category.product'),
  t('courses.category.fullstack'),
  t('courses.category.operation'),
  t('courses.category.marketing')
];

const certificationTabs = [
  t('courses.cert.ai'),
  t('courses.cert.data'),
  t('courses.cert.design'),
  t('courses.cert.sales')
];

// 体系课程数据
const systemCourses = [
  {
    tag: t('courses.system.tag'),
    title: t('courses.pm.title'),
    subtitle: t('courses.pm.title'),
    instructor: t('courses.pm.instructor'),
    bgColor: 'bg-primary'
  },
  {
    tag: t('courses.system.tag'),
    title: t('courses.clerk.title'),
    subtitle: t('courses.clerk.subtitle'),
    instructor: t('courses.clerk.instructor'),
    bgColor: 'bg-warning'
  },
  {
    tag: t('courses.system.tag'),
    title: t('courses.dev.title'),
    subtitle: t('courses.dev.title'),
    instructor: t('courses.dev.instructor'),
    bgColor: 'bg-neutral'
  }
];

// 认证课程数据
const certificationCourses = [
  {
    tag: t('courses.cert.tag'),
    title: t('courses.cisco.title'),
    description: t('courses.cisco.desc')
  },
  {
    tag: t('courses.cert.tag'),
    title: t('courses.microsoft.title'),
    description: t('courses.microsoft.desc')
  },
  {
    tag: t('courses.cert.tag'),
    title: t('courses.comptia.title'),
    description: t('courses.comptia.desc')
  }
];

const stats = [
  { number: '3,000+', label: t('home.stats.courses') },
  { number: '70+', label: t('home.stats.instructors') },
  { number: '50+', label: t('home.stats.newCourses') },
  { number: '20+', label: t('home.stats.certFields') }
];
---

<Layout title={`${t('nav.courses')} - Training`}>
  <!-- Hero Section -->
  <section class="hero bg-base-100 min-h-[30vh] border-b border-base-300">
    <div class="hero-content text-center">
      <div>
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4" style="animation: slideInFromLeft 0.6s ease-out">
          {t('courses.hero.title')}<span class="text-primary">{t('courses.hero.titleNew')}</span> {t('courses.hero.titleMaster')}<span class="text-primary">{t('courses.hero.titleSkills')}</span>
        </h1>
      </div>
    </div>
  </section>

  <!-- Stats Bar -->
  <section class="bg-primary py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-0">
        {stats.map((stat, index) => (
          <div
            class={`flex flex-col items-center justify-center text-primary-content py-6 ${index < stats.length - 1 ? 'lg:border-r lg:border-primary-content/20' : ''}`}
            style={`animation: slideInFromLeft 0.5s ease-out ${0.1 * index}s both`}
          >
            <div class="text-2xl sm:text-3xl md:text-4xl font-bold mb-2">{stat.number}</div>
            <div class="text-primary-content/80 text-xs sm:text-sm text-center">{stat.label}</div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- System Courses Section -->
  <section class="py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12" style="animation: slideInFromLeft 0.6s ease-out both">
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4">
          {t('courses.system.title')}
        </h2>
      </div>

      <!-- Category Tabs with Course Cards -->
      <div style="animation: slideInFromLeft 0.6s ease-out 0.2s both">
        <CourseTabs tabs={categories} courses={systemCourses} type="system" client:load />
      </div>
    </div>
  </section>

  <!-- Certification Courses Section -->
  <section class="bg-base-200 py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12" style="animation: slideInFromLeft 0.6s ease-out both">
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4">
          {t('courses.cert.title')}
        </h2>
      </div>

      <!-- Certification Tabs with Course Cards -->
      <div style="animation: slideInFromLeft 0.6s ease-out 0.2s both">
        <CourseTabs tabs={certificationTabs} courses={certificationCourses} type="certification" client:load />
      </div>
    </div>
  </section>
</Layout>
