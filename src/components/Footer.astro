---
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { getRelativeLocaleUrl } from 'astro:i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// 页脚组件 - 模仿微软布局风格
const currentYear = new Date().getFullYear();

const footerColumns = [
  {
    title: t('footer.learning'),
    links: [
      { name: t('footer.courses'), href: getRelativeLocaleUrl(lang, 'courses') },
      { name: t('footer.solutions'), href: getRelativeLocaleUrl(lang, 'solutions') },
      { name: t('footer.cases'), href: getRelativeLocaleUrl(lang, 'cases') },
      { name: t('footer.certification'), href: getRelativeLocaleUrl(lang, 'certification') },
      { name: t('footer.enterprise'), href: getRelativeLocaleUrl(lang, 'enterprise') }
    ]
  },
  {
    title: t('footer.about'),
    links: [
      { name: t('footer.company'), href: getRelativeLocaleUrl(lang, 'about') },
      { name: t('footer.news'), href: getRelativeLocaleUrl(lang, 'news') },
      { name: t('footer.careers'), href: getRelativeLocaleUrl(lang, 'careers') },
      { name: t('footer.contactUs'), href: getRelativeLocaleUrl(lang, 'contact') }
    ]
  },
  {
    title: t('footer.supportTitle'),
    links: [
      { name: t('footer.help'), href: getRelativeLocaleUrl(lang, 'help') },
      { name: t('footer.faq'), href: getRelativeLocaleUrl(lang, 'faq') },
      { name: t('footer.support'), href: getRelativeLocaleUrl(lang, 'support') },
      { name: t('footer.feedback'), href: getRelativeLocaleUrl(lang, 'feedback') }
    ]
  }
];
---

<!-- 主要页脚区域 -->
<footer class="bg-base-200 text-base-content">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-2 md:grid-cols-3 gap-8 md:gap-12">
      {footerColumns.map((column) => (
        <nav>
          <h6 class="font-semibold text-sm mb-4">{column.title}</h6>
          <ul class="space-y-3">
            {column.links.map((link) => (
              <li>
                <a href={link.href} class="text-sm opacity-70 hover:opacity-100 hover:underline transition-opacity">
                  {link.name}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      ))}
    </div>
  </div>
</footer>

<!-- 底部版权区域 -->
<footer class="bg-base-200 text-base-content border-t border-base-300">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
      <div class="flex items-center gap-6 text-xs opacity-60">
        <a href={getRelativeLocaleUrl(lang, 'privacy')} class="hover:underline">{t('footer.privacy')}</a>
        <a href={getRelativeLocaleUrl(lang, 'terms')} class="hover:underline">{t('footer.terms')}</a>
        <a href={getRelativeLocaleUrl(lang, 'sitemap')} class="hover:underline">{t('footer.sitemap')}</a>
        <a href="tel:000-000-0000" class="hover:underline">{t('footer.contactPhone')}</a>
      </div>
      <div class="text-xs opacity-60">
        © {currentYear} Training. {t('footer.copyright')}
      </div>
    </div>
  </div>
</footer>
